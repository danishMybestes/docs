# Project Architecture Overview

## 1. Application Structure

The application follows a modular architecture with clear separation of concerns:

```
my_bestes/
├── lib/
│   ├── actions/           # Custom actions and business logic
│   ├── admin/            # Admin panel functionality
│   ├── auth/             # Authentication related components
│   ├── backend/          # Backend services and Firebase integration
│   ├── chat/             # Chat functionality
│   ├── common/           # Shared components and utilities
│   ├── documents/        # Document management
│   ├── examinations/     # Examination related features
│   ├── family/           # Family management features
│   ├── game/             # Game components
│   ├── health_cam/       # Health camera functionality
│   ├── hub_page/         # Main hub/dashboard
│   ├── main_feed/        # Main feed content
│   ├── onboarding/       # User onboarding flow
│   ├── provider/         # State management providers
│   ├── quiz/             # Quiz functionality
│   └── values/           # Constants and shared values
```

## 2. Core Architecture Components

### 2.1 State Management
- Uses Provider pattern for state management
- `FFAppState` class manages global application state
- Key state variables:
  - User authentication state
  - Content video state
  - Feed state
  - Admin toolbar visibility
  - Audio/music state
  - Page navigation state

### 2.2 Authentication Flow
```
Login Page → Authentication → User Profile
    ↑            ↓
    └────────────┘
```

Authentication Components:
- Login
- Sign Up
- Password Reset
- Profile Management
- Email Update
- Username Update

### 2.3 Navigation Flow
```
Splash Screen
     ↓
Onboarding (if new user)
     ↓
Authentication
     ↓
Main Hub
     ↓
├── Feed
├── Chat
├── Quiz
├── Game
├── Health Cam
├── Documents
└── Family
```

## 3. Firebase Integration

### 3.1 Firebase Services Used
- Authentication
- Firestore Database
- Cloud Storage
- Cloud Messaging
- Dynamic Links
- Remote Config
- Crashlytics

### 3.2 Firebase Schema

#### Users Collection
```json
{
  "users": {
    "userId": {
      "email": "string",
      "username": "string",
      "profile": {
        "name": "string",
        "photoUrl": "string",
        "familyMembers": ["userId"],
        "healthData": {}
      },
      "sessions": ["sessionId"],
      "createdAt": "timestamp"
    }
  }
}
```

#### Feed Collection
```json
{
  "feed": {
    "postId": {
      "content": "string",
      "media": {
        "type": "string",
        "url": "string"
      },
      "author": "userId",
      "likes": ["userId"],
      "comments": [{
        "userId": "string",
        "text": "string",
        "timestamp": "timestamp"
      }],
      "createdAt": "timestamp"
    }
  }
}
```

#### Sessions Collection
```json
{
  "sessions": {
    "sessionId": {
      "userId": "string",
      "type": "string",
      "startTime": "timestamp",
      "endTime": "timestamp",
      "data": {}
    }
  }
}
```

## 4. Key Features and Components

### 4.1 Main Features
1. **Authentication System**
   - Email/Password login
   - Social login integration
   - Password reset
   - Profile management

2. **Content Management**
   - Video content with playback controls
   - Feed system with posts and interactions
   - Document management
   - Health data tracking

3. **Interactive Features**
   - Chat system
   - Quiz functionality
   - Game components
   - Health camera integration

4. **Family Management**
   - Family member connections
   - Shared health data
   - Group activities

### 4.2 Dynamic Configurations
1. **Theme Management**
   - Light/Dark mode support
   - Custom theme configuration
   - Dynamic theme switching

2. **Localization**
   - Multi-language support
   - German language implementation
   - Dynamic locale switching

3. **Push Notifications**
   - Firebase Cloud Messaging integration
   - Custom notification handling
   - User session tracking

## 5. Security Architecture

1. **Authentication Security**
   - Firebase Authentication
   - JWT token management
   - Session management

2. **Data Security**
   - Firestore security rules
   - Role-based access control
   - Data encryption

3. **API Security**
   - Secure API endpoints
   - Token validation
   - Rate limiting

## 6. Performance Considerations

1. **State Management**
   - Efficient state updates
   - Minimal rebuilds
   - Optimized providers

2. **Asset Management**
   - Lazy loading
   - Image optimization
   - Cache management

3. **Network Optimization**
   - Efficient data fetching
   - Offline support
   - Background sync
