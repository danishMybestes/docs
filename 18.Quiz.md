# Quiz System Architecture

## 1. System Overview

```mermaid
graph TD
    A[Quiz System] --> B[Core Components]
    A --> C[Quiz Management]
    A --> D[User Integration]
    
    B --> B1[Quiz View]
    B --> B2[Quiz Sheet]
    B --> B3[Open Quiz Button]
    
    C --> C1[Question Flow]
    C --> C2[Result Management]
    
    D --> D1[User Progress]
    D --> D2[Score Tracking]
```

## 2. Component Structure

### 2.1 Quiz Components
```mermaid
graph TD
    A[Quiz Components] --> B[Quiz View]
    A --> C[Quiz Sheet]
    A --> D[Open Quiz Button]
    
    B --> B1[Question Display]
    B --> B2[Answer Options]
    B --> B3[Progress Indicator]
    
    C --> C1[Quiz Interface]
    C --> C2[Result Display]
    C --> C3[Score Summary]
    
    D --> D1[Quiz Access]
    D --> D2[Status Display]
```

## 3. Integration Points

### 3.1 Component Usage
```mermaid
graph TD
    A[Quiz Components] --> B[Health Hub]
    A --> C[Learning Center]
    A --> D[User Profile]
    
    B --> B1[Health Knowledge]
    B --> B2[Medical Awareness]
    
    C --> C1[Educational Content]
    C --> C2[Learning Progress]
    
    D --> D1[User Achievements]
    D --> D2[Progress Tracking]
```

## 4. Firebase Schema

### 4.1 Quiz Schema
```mermaid
erDiagram
    QUIZZES {
        string quizId
        string title
        string description
        string category
        int totalQuestions
        int timeLimit
        int passingScore
        timestamp createdAt
        timestamp updatedAt
    }
    
    QUIZ_QUESTIONS {
        string questionId
        string quizId
        string question
        string type
        array options
        string correctAnswer
        int points
    }
    
    USER_PROFILE {
        string userId
        string name
        string email
        array completedQuizzes
        int totalScore
        int level
        timestamp lastQuizAttempt
    }
    
    QUIZ_RESULTS {
        string resultId
        string userId
        string quizId
        int score
        int correctAnswers
        int timeTaken
        timestamp completedAt
    }
    
    QUIZZES ||--o{ QUIZ_QUESTIONS : contains
    USER_PROFILE ||--o{ QUIZ_RESULTS : has
    QUIZZES ||--o{ QUIZ_RESULTS : generates
```

## 5. Component Features

### 5.1 Quiz View
- **Features:**
  - Question display
  - Answer options
  - Progress tracking
  - Timer display
  - Navigation controls

- **Usage:**
  - Quiz taking
  - Progress monitoring
  - User interaction

### 5.2 Quiz Sheet
- **Features:**
  - Quiz interface
  - Result display
  - Score summary
  - Feedback section
  - Share options

- **Usage:**
  - Quiz completion
  - Result presentation
  - Progress tracking

### 5.3 Open Quiz Button
- **Features:**
  - Quiz access
  - Status display
  - Progress indicator
  - Quick start
  - Category filter

- **Usage:**
  - Quiz initiation
  - Status monitoring
  - Quick access

## 6. Workflow

### 6.1 Quiz Flow
```mermaid
sequenceDiagram
    participant User
    participant App
    participant Firebase
    participant API
    participant Components
    
    User->>App: Start Quiz
    App->>Firebase: Fetch Questions
    Firebase-->>App: Return Questions
    App->>Components: Display Quiz
    User->>App: Submit Answers
    App->>API: Process Answers
    API-->>App: Return Results
    App->>Firebase: Store Results
    Components->>App: Show Summary
```

## 7. State Management

```mermaid
graph TD
    A[Quiz State] --> B[Question State]
    A --> C[Progress State]
    A --> D[Result State]
    
    B --> B1[Current Question]
    B --> B2[Answer Status]
    
    C --> C1[Progress Tracking]
    C --> C2[Time Management]
    
    D --> D1[Score Calculation]
    D --> D2[Result Processing]
```

## 8. Dynamic Configurations

### 8.1 Quiz Settings
```mermaid
graph TD
    A[Quiz Config] --> B[Question Settings]
    A --> C[Time Settings]
    A --> D[Score Settings]
    
    B --> B1[Question Types]
    B --> B2[Answer Options]
    
    C --> C1[Time Limits]
    C --> C2[Timer Display]
    
    D --> D1[Scoring Rules]
    D --> D2[Passing Criteria]
```

## 9. Feature Matrix

| Component | Features | Firebase Collections | State Management |
|-----------|----------|---------------------|------------------|
| Quiz View | Questions, Answers | quizzes, quiz_questions | QuestionState |
| Quiz Sheet | Results, Summary | quiz_results | ResultState |
| Open Quiz Button | Access, Status | userProfile | ProgressState |

## 10. API Integration

### 10.1 API Endpoints
```mermaid
graph TD
    A[API Calls] --> B[Quiz API]
    A --> C[Result API]
    A --> D[User API]
    
    B --> B1[Get Questions]
    B --> B2[Submit Answers]
    
    C --> C1[Process Results]
    C --> C2[Update Scores]
    
    D --> D1[Get Progress]
    D --> D2[Update Profile]
```

## 11. Error Handling

```mermaid
graph TD
    A[Error Types] --> B[Question Errors]
    A --> C[Submission Errors]
    A --> D[Result Errors]
    
    B --> B1[Load Errors]
    B --> B2[Display Errors]
    
    C --> C1[Submit Errors]
    C --> C2[Validation Errors]
    
    D --> D1[Process Errors]
    D --> D2[Storage Errors]
```

## 12. Security Implementation

```mermaid
graph TD
    A[Security] --> B[Quiz Security]
    A --> C[Result Security]
    A --> D[User Security]
    
    B --> B1[Question Access]
    B --> B2[Answer Protection]
    
    C --> C1[Result Privacy]
    C --> C2[Score Protection]
    
    D --> D1[User Authentication]
    D --> D2[Progress Security]
```

This architecture document provides a comprehensive overview of the Quiz system, focusing on its components, integration points, and data flow. The system is designed to be modular and reusable, with components that can be integrated into various parts of the application.
